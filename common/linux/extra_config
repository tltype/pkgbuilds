# This configuration is only applicable to Elish.

# Do not force the kernel command line
CONFIG_CMDLINE_FORCE=n

# USB settings
CONFIG_USB_ETH=n
CONFIG_USB_CONFIGFS_MASS_STORAGE=y

# Module compression
CONFIG_MODULE_COMPRESS=y
CONFIG_MODULE_COMPRESS_ZSTD=y

# Device mapping
CONFIG_BLK_DEV_DM_BUILTIN=y
CONFIG_BLK_DEV_DM=y

# Enabale Network as modules to prevent crashes
# Keep IPv6 and Bridge as modules to avoid large kernel size
CONFIG_IPV6=m
CONFIG_BRIDGE=m
CONFIG_BRIDGE_NETFILTER=m
CONFIG_VLAN_8021Q=m

# Keep IPv4 Raw table built-in
CONFIG_IP_NF_RAW=y
CONFIG_IP_NF_IPTABLES=y
CONFIG_NETFILTER_XT_TARGET_CT=y

# Enable physical interface matching (Bridge mode required)
CONFIG_NETFILTER_XT_MATCH_PHYSDEV=m

# Enable missing Bluetooth protocols
# Enable necessary protocols as modules
CONFIG_BT=m
CONFIG_BT_BREDR=y
CONFIG_BT_LE=y

# Fix "kernel lacks bnep-protocol support"
CONFIG_BT_BNEP=m
CONFIG_BT_BNEP_MC_FILTER=y
CONFIG_BT_BNEP_PROTO_FILTER=y

# Fix missing serial and HID support
CONFIG_BT_RFCOMM=m
CONFIG_BT_RFCOMM_TTY=y
CONFIG_BT_HIDP=m

# Enable Qualcomm driver
CONFIG_BT_HCIUART=m
CONFIG_BT_HCIUART_QCA=y

